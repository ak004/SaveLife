<%- include('header') %>

<style>
  .avatar-upload {
position: relative;
max-width: 205px;
margin: 0px auto;
}
.avatar-upload .avatar-edit {
  position: absolute;
  right: -10px;
  z-index: 1;
  top: 10px;
}
.avatar-upload .avatar-edit input {
      display: none;
}
.avatar-upload .avatar-edit label  {
          display: inline-block;
          width: 34px;
          height: 34px;
          margin-bottom: 0;
          border-radius: 100%;
          background: #FFFFFF;
          border: 1px solid transparent;
          box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.12);
          cursor: pointer;
          font-weight: normal;
          transition: all .2s ease-in-out;
}
.avatar-upload .avatar-edit  label:hover {
              background: #f1f1f1;
              border-color: #d6d6d6;
          }
.avatar-upload .avatar-edit  label:after {
              content: "\f040";
              font-family: 'FontAwesome';
              color: #757575;
              position: absolute;
              top: 10px;
              left: 0;
              right: 0;
              text-align: center;
              margin: auto;
          }
      
.avatar-preview {
  width: 195px;
  height: 195px;
  position: relative;
  border-radius: 50%;
  border: 6px solid #F8F8F8;
  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.1);
}
.avatar-preview img {
            width: 100%;
            height: 100%;
            border-radius: 100%;
           
        }
 
    </style>
<div class="ibox float-e-margins">
    <div class="ibox-content text-center p-md">
            <h1 >
                Organizations
            </h1>
    </div>


    <div class="container py-5 h-100">



        
        <div class="row justify-content-center align-items-center h-100">
          <div class="col-12 col-lg-9 col-xl-12">
            <div class="card shadow-2-strong card-registration" style="border-radius: 15px;">
              <div class="card-body p-4 p-md-5">
                <h3 class="mb-4 pb-2 pb-md-0 mb-md-5">Registration Form</h3>
                <form id="register_form" method="POST" action="/orginazation" enctype="multipart/form-data">
      
                    <div class="row">

                      <!-- <div class="col-md-4">
                        <label class="label"> Organization Logo</label>
                        <div class="holdimgg">
                          <img class="card" style="width: 10rem; height: 100px;" src="/images/imgholder.jpg" >
                          <input id="files" class="fileupload_2 upload-input" type="file" name="logo" multiple accept=".pdf,.doc,.docx,.jpg,.png" required >
                        </div>


                      </div> -->
                      <div class="col-md-3">
                        <div class="avatar-upload">
                          <div class="avatar-edit">
                              <input type='file' name="logo" id="imageUpload" accept=".png, .jpg, .jpeg" />
                              <label for="imageUpload"></label>
                          </div>
                          <div class="avatar-preview">
                           
                                  <img  id="imagePreview" style="width: 100%; height:100%" src="/images/imgholder.jpg" alt="author-image" class="author__img">
                                  
                          </div>
                      </div>
                      </div>
             

                        <div class="col-md-6 mb-6" style="margin-top: 50px;">
      
                            <div class="form-outline">
                              <label class="form-label" for="titles">Organizations Name</label>
                              <input type="text" id="Organizations_name" name="Organizations_name" class="form-control form-control-lg" />
                            </div>
                        </div>

                    <div class="form-group">
                      <label for="Descriptionss">Description</label>
                      <textarea class="form-control" id="Descriptionss" name="Descriptionss" rows="3"></textarea>
                    </div>

                    <div class="row">
                      
                      <div class="col-md-3">
                        <label class="label"> Organization owner image</label>
                        <div class="holdimgg">
                          <img class="card" style="width: 10rem; height: 100px;" src="/images/imgholder.jpg" >
                          <input id="files" class="fileupload_3 upload-input" type="file" name="owner_img" multiple accept=".pdf,.doc,.docx,.jpg,.png" required>
                        </div>


                      </div>

                        <div class="col-md-5 mb-4" style="margin-top: 55px;">
        
                          <div class="form-outline">
                            <input class="form-control txt_err rooms" type="text" id="owner_name" name="owner_name" required>
                            <label class="form-label" for="firstName">Owner name</label>
                          </div>
        
                        </div>
                        <div class="col-md-4 mb-4"style="margin-top: 55px;">
        
                          <div class="form-outline">
                            <input class="form-control txt_err rooms" onkeypress="return isNumberKey(event)" type="text" id="phone_number" name="phone_number" required>
                            <label class="form-label" for="lastName">phone number</label>
                          </div>
        
                        </div>
                      </div>
                


                  <div class="row">
                    <div class="col-md-6 mb-4" style="margin-top: 15px;">
    
                      <div class="form-outline">
                        <input class="form-control txt_err rooms"  type="text" id="contact" name="contact" required>
                        <label class="form-label" for="firstName">contact</label>
                      </div>
    
                    </div>
                    <div class="col-md-6 mb-4"style="margin-top: 15px;">
    
                      <div class="form-outline">
                        <input class="form-control txt_err rooms" type="text" id="address" name="address" required>
                        <label class="form-label" for="lastName">Address</label>
                      </div>
    
                    </div>
                  </div>
    
                  <div class="row">

                    <div class="col-md-6 mb-4">
    
                      <select class="select form-control-lg need_type " name="status" id="status" style="width: 350px;">
                        <option value="">status</option>
                          <option value="active">active</option>
                          <option value="Suspend">Suspend</option>
                        </select>
                        <label class="form-label select-label" style="margin-left: 15px;">Status</label>
                    </div>
                  </div>


                  <div class="row">
                    <div class="col-sm-12 col-md-2">
                        <div class="form-group hand_1">
                            <label for="floor" class="label">Organizations images</label>
                            <div class="dropzone hand_1">
                                <img src="/images/zupld.png" class="upload-icon hand_1" />
                                <input id="files" class="fileupload_1 upload-input" type="file" name="floor" multiple accept=".pdf,.doc,.docx,.jpg,.png"required >
                            </div>
                            <label class="lbl_err property_img">property image is require</label>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-10">
                        <label for="images_1" class="label" style="height: 100px; width: 100px">uploaded images</label>
                        <div class="dropzone mdf w-100">
                            <div id="uploaded_images_1" class="row"> </div>
                        </div>
                    </div>
                 </div>
    



                  
    
            
    
                  <div class="mt-4 pt-2">
                    <input class="btn btn-primary btn-lg" type="submit" value="Submit" />
                  </div>
    
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
</div>
</div>

<%- include('footer') %>

<script>



function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();
        reader.onload = function(e) {
            console.log(e)
            // $('#imagePreview').attr('src',  +e.target.result );
            document
    .getElementById('imagePreview')
    .src =e.target.result
            // $('#imagePreview').css('background-image', 'url('+e.target.result +')');
            $('#imagePreview').hide();
            $('#imagePreview').fadeIn(650);
        }
        reader.readAsDataURL(input.files[0]);
    }
}
$("#imageUpload").change(function() {
    readURL(this);
});



function isNumberKey(evt) {
    var charCode = (evt.which) ? evt.which : event.keyCode
    if (charCode > 31 && (charCode < 48 || charCode > 57))
        return false;
    return true;
}
var images_to_upload = [];


$(".fileupload_1").on("change", function(e) {
  var files = e.target.files;
  if (parseInt(files.length) > 10) {
      toastr.error("You can only upload a maximum of 10 files", "Error", {
          "timeOut": "2000",
          "extendedTImeout": "500"
      });
      return;
  } else {
      for (var count = 0; count < files.length; count++) {
          var name = files[count].name;
          var extension = name.split('.').pop().toLowerCase();
          if (jQuery.inArray(extension, ['gif', 'png', 'jpg', 'jpeg']) == -1) {
              toastr.error("Invalid " + name + '.' + extension + " Image File", "Error", {
                  "timeOut": "2000",
                  "extendedTImeout": "500"
              });
          } else {
              var reader = new FileReader();
              reader.readAsDataURL(files[count]);
              images_to_upload.push(name);
              reader.onload = function(e) {
                  var templete = '<div class = "uploaded_image fileinput-button col-sm-3"> <input type="file" name = "property_img[]" id = "property_img" hidden><img src="' + e.target.result + '" style="width: 10rem; height: 80px;"> <a href = "#" class="img_rmv btn btn-danger" id="file_' + name + '"> <i class= "fa fa-times-circle" style="font-size:28px;color:red"> </i> </a> </div>';
                  $("#uploaded_images_1").append(templete);
              }
          }
      }
  }
})

$(".fileupload_2").on("change", function(e) {
  var files = e.target.files;
  if (parseInt(files.length) > 1) {
      toastr.error("You can only upload a maximum of 1 files", "Error", {
          "timeOut": "2000",
          "extendedTImeout": "500"
      });
      return;
  } else {
      for (var count = 0; count < files.length; count++) {
          var name = files[count].name;
          var extension = name.split('.').pop().toLowerCase();
          if (jQuery.inArray(extension, ['gif', 'png', 'jpg', 'jpeg']) == -1) {
              toastr.error("Invalid " + name + '.' + extension + " Image File", "Error", {
                  "timeOut": "2000",
                  "extendedTImeout": "500"
              });
          } else {
              var reader = new FileReader();
              reader.readAsDataURL(files[count]);
              images_to_upload.push(name);
              reader.onload = function(e) {
                  var templete = '<div class = "uploaded_image fileinput-button col-sm-3"> <input type="file" name = "org_img[]" id = "org_img" hidden><img src="' + e.target.result + '" > <a href = "#" class="img_rmv btn btn-danger" id="file_' + name + '"> <i class= "fa fa-times-circle" style="font-size:48px;color:red"> </i> </a> </div>';
                  $("#holdimgg").append(templete);
              }
          }
      }
  }
})



$(".fileupload_3").on("change", function(e) {
  var files = e.target.files;
  if (parseInt(files.length) > 1) {
      toastr.error("You can only upload a maximum of 1 files", "Error", {
          "timeOut": "2000",
          "extendedTImeout": "500"
      });
      return;
  } else {
      for (var count = 0; count < files.length; count++) {
          var name = files[count].name;
          var extension = name.split('.').pop().toLowerCase();
          if (jQuery.inArray(extension, ['gif', 'png', 'jpg', 'jpeg']) == -1) {
              toastr.error("Invalid " + name + '.' + extension + " Image File", "Error", {
                  "timeOut": "2000",
                  "extendedTImeout": "500"
              });
          } else {
              var reader = new FileReader();
              reader.readAsDataURL(files[count]);
              images_to_upload.push(name);
              reader.onload = function(e) {
                  var templete = '<div class = "uploaded_image fileinput-button col-sm-3"> <input type="file" name = "org_img[]" id = "org_img" hidden><img src="' + e.target.result + '" > <a href = "#" class="img_rmv btn btn-danger" id="file_' + name + '"> <i class= "fa fa-times-circle" style="font-size:48px;color:red"> </i> </a> </div>';
                  $("#holdimgg").append(templete);
              }
          }
      }
  }
})



$("#uploaded_images_1").on("click", ".img_rmv", function() {
  var array = [];
  console.log('before ' + images_to_upload);
  var _id = this.id.substring(5);
  const index = images_to_upload.indexOf(_id);
  if (index > -1) {
      images_to_upload.splice(index, 1);
  }
  for (var count = 0; count < images_to_upload.length; count++) {
      array.push(images_to_upload[count]);
  }
  images_to_upload = array;
  console.log('after ' + images_to_upload);
  $(this).parent().remove();
});





</script>